// Configuration des mises à jour automatiques
// Générée par Ansible pour {{ environment }}

// Allowed (whitelisted) origins
Unattended-Upgrade::Allowed-Origins {
    "${distro_id}:${distro_codename}";
    "${distro_id}:${distro_codename}-security";
    "${distro_id}ESMApps:${distro_codename}-apps-security";
    "${distro_id}ESM:${distro_codename}-infra-security";
    "${distro_id}:${distro_codename}-updates";
};

// Packages that will not be automatically upgraded
Unattended-Upgrade::Package-Blacklist {
    // Docker packages (manual upgrade)
    "docker-ce";
    "docker-ce-cli";
    "containerd.io";
    // Kernel packages (manual upgrade)
    "linux-image-*";
    "linux-headers-*";
    "linux-modules-*";
};

// Automatically upgrade packages from these (origin:archive) pairs
Unattended-Upgrade::Package-Whitelist {
    // Security updates only
};

// Automatically reboot *WITHOUT CONFIRMATION*
Unattended-Upgrade::Automatic-Reboot "false";

// If automatic reboot is enabled, reboot at the specific time
Unattended-Upgrade::Automatic-Reboot-Time "02:00";

// Automatically reboot even if there are users currently logged in
Unattended-Upgrade::Automatic-Reboot-WithUsers "false";

// Remove unused automatically installed kernel-related packages
Unattended-Upgrade::Remove-Unused-Kernel-Packages "true";

// Remove unused dependencies after the upgrade
Unattended-Upgrade::Remove-Unused-Dependencies "true";

// Send email to this address for problems or packages upgrades
Unattended-Upgrade::Mail "root";

// Set this value to "true" to get emails only on errors
Unattended-Upgrade::MailOnlyOnError "true";

// Remove new unused dependencies after the upgrade
Unattended-Upgrade::Remove-New-Unused-Dependencies "true";

// Automatically reboot without confirmation if the file is present
Unattended-Upgrade::AutoFixInterruptedDpkg "true";

// Minimum size (in MB) for the cache of the package
Unattended-Upgrade::MinimalSteps "true";

// Install on shutdown instead of in background
Unattended-Upgrade::InstallOnShutdown "false";

// Skip updates that require a reboot
Unattended-Upgrade::Skip-Updates-On-Metered-Connections "true";

// Verbose logging
Unattended-Upgrade::Verbose "false";

// Print debugging information
Unattended-Upgrade::Debug "false";

// Run dpkg --force-confold
Unattended-Upgrade::Force-ConfOld "true";