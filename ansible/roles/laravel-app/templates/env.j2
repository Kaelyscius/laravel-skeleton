# Configuration Laravel générée par Ansible
# Environnement: {{ environment }}
# Généré le: {{ ansible_date_time.iso8601 }}

# Application
APP_NAME="{{ app_project_name }}"
APP_ENV="{{ laravel_env }}"
APP_KEY=
APP_DEBUG={{ laravel_debug | lower }}
APP_URL=http://{{ app_domain_name | default('localhost') }}
APP_TIMEZONE={{ system.timezone | default('UTC') }}

# Logs
LOG_CHANNEL=stack
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL={{ laravel_log_level | default('debug') }}

# Database
DB_CONNECTION=mysql
DB_HOST=mariadb
DB_PORT=3306
DB_DATABASE={{ app_project_name }}_db
DB_USERNAME={{ app_project_name }}_user
DB_PASSWORD={{ ansible_date_time.epoch }}{{ app_project_name }}

# Database Root
DB_ROOT_PASSWORD={{ ansible_date_time.epoch }}root{{ app_project_name }}

# Redis
REDIS_HOST=redis
REDIS_PASSWORD={{ ansible_date_time.epoch }}redis{{ app_project_name }}
REDIS_PORT=6379

# Cache
CACHE_DRIVER={{ laravel.cache_driver | default('redis') }}
CACHE_PREFIX={{ app_project_name }}_cache

# Session
SESSION_DRIVER={{ laravel.session_driver | default('redis') }}
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=null

# Queue
QUEUE_CONNECTION={{ laravel.queue_driver | default('redis') }}

# Mail
MAIL_MAILER=smtp
MAIL_HOST={{ 'mailhog' if optional_services.mailhog.enabled else 'localhost' }}
MAIL_PORT={{ '1025' if optional_services.mailhog.enabled else '587' }}
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_ENCRYPTION=null
MAIL_FROM_ADDRESS="noreply@{{ app_domain_name | default('localhost') }}"
MAIL_FROM_NAME="{{ app_project_name }}"

# Filesystem
FILESYSTEM_DISK=local

# Broadcasting
BROADCAST_DRIVER=log
PUSHER_APP_ID=
PUSHER_APP_KEY=
PUSHER_APP_SECRET=
PUSHER_HOST=
PUSHER_PORT=443
PUSHER_SCHEME=https
PUSHER_APP_CLUSTER=mt1

# Vite
VITE_PUSHER_APP_KEY="${PUSHER_APP_KEY}"
VITE_PUSHER_HOST="${PUSHER_HOST}"
VITE_PUSHER_PORT="${PUSHER_PORT}"
VITE_PUSHER_SCHEME="${PUSHER_SCHEME}"
VITE_PUSHER_APP_CLUSTER="${PUSHER_APP_CLUSTER}"

# Docker Compose
COMPOSE_PROJECT_NAME={{ app_project_name }}

# Watchtower (si activé)
{% if optional_services.watchtower.enabled %}
WATCHTOWER_NOTIFICATIONS={{ notifications.enabled | default(false) }}
WATCHTOWER_NOTIFICATION_URL={{ notifications.webhook_url | default('') }}
WATCHTOWER_DEBUG={{ 'true' if laravel_debug else 'false' }}
{% endif %}

# Telescope (si activé)
{% if laravel.telescope_enabled %}
TELESCOPE_ENABLED=true
{% else %}
TELESCOPE_ENABLED=false
{% endif %}

# Horizon (si activé)
{% if laravel.horizon_enabled %}
HORIZON_ENABLED=true
{% else %}
HORIZON_ENABLED=false
{% endif %}

# Configuration spécifique à l'environnement
{% if environment == 'production' %}
# Production
DEBUGBAR_ENABLED=false
TELESCOPE_ENABLED=false
{% elif environment == 'staging' %}
# Staging
DEBUGBAR_ENABLED=false
TELESCOPE_ENABLED=true
{% else %}
# Development
DEBUGBAR_ENABLED=true
TELESCOPE_ENABLED=true
{% endif %}